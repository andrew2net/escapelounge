.page-head
  .container
    .row
      .col-md-10
        %h4 Billing
      .col-md-2

.container

  %h4.mb-3 Cards
  #cards-container
    = render partial: 'cards'

  = render partial: 'card_form'
  -# = button_tag 'Add card', class: 'btn btn-primary', type: 'button',
    data: { customer: current_user.stripe_id }, id: 'add-card-btn'

  %h4.mt-5 Invoices

  .row.border.border-primary.pt-2.border-bottom-0.border-right-0.border-left-0
    .col-md-3
      %h6 Created
    .col-md-3
      %h6 Amount
    .col-md-2
      %h6 Currency
    .col-md-2
      %h6 Status

  - @invoices.each do |invoice|
    .row.border.border-primary.py-1.border-bottom-0.border-right-0.border-left-0
      .col-md-3= invoice[:created].strftime '%F'
      .col-md-3= invoice[:amount]
      .col-md-2= invoice[:currency]
      .col-md-2= invoice[:status]
      .col-md-2
        = button_tag 'Details', class: 'btn btn-primary btn-sm', type: 'button',
          data: { toggle: 'collapse', target: "##{invoice[:id]}" }

    .collapse{ id: invoice[:id] }
      .card.card-body
        .row
          .col-md-3 Type
          .col-md-3 Name
          .col-md-2 Amount
          .col-md-2 Period start
          .col-md-2 Period end

        - invoice[:lines].each do |line|
          .row
            .col-md-3= line[:type]
            .col-md-3= line[:name]
            .col-md-2= line[:amount]
            .col-md-2= line[:period_start].strftime '%F'
            .col-md-2= line[:period_end].strftime '%F'
